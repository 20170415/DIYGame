(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["entireGame"],{"0056":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"entireGame"}},[null!=e.runningGame&&0==e.gameEnd?n("div",{staticStyle:{"font-size":"15px",color:"red","font-weight":"600"}},[e._v("上、左、右键移动角色，esc键暂停")]):e._e(),null==e.runningGame?n("div",{staticClass:"startUpFace",style:e.backgroundStyle},[n("button",{style:e.startUpBtn,on:{click:function(t){return e.startGame()}}},[e._v(e._s(e.startUpBtnText))]),e._l(e.processTextComponent,function(t,r){return n("div",{key:"textItem"+r,staticClass:"textItem",style:t.style},[e._v(e._s(t.textContent))])}),e._l(e.processPictureComponent,function(e,t){return n("div",{key:"pictureItem"+t,staticClass:"imgItem",style:e.style},[n("img",{attrs:{src:e.url,width:e.width}})])})],2):e._e(),e.gameEnd?n("div",{staticClass:"endFace",style:e.endBackgroundStyle},[n("pre",{staticClass:"textFlow",style:e.textFlowRealTimeStyle},[e._v(e._s(e.endProcessTextFlow.textContent))]),e._l(e.endProcessTextComponent,function(t,r){return n("div",{key:"textItem"+r,staticClass:"textItem",style:t.style},[e._v(e._s(t.textContent))])}),e._l(e.endProcessPictureComponent,function(e,t){return n("div",{key:"pictureItem"+t,staticClass:"imgItem",style:e.style},[n("img",{attrs:{src:e.url,width:e.width}})])})],2):e._e(),n("div",{staticClass:"gameContainer"}),n("div",{staticClass:"btnGroup"},[n("button",{staticClass:"designBtn",on:{click:function(t){return e.goToPlayerFigureDesign()}}},[n("font-awesome-icon",{staticClass:"fa-lg",attrs:{icon:"male"}}),e._v(" 角色设计\n    ")],1),n("button",{staticClass:"designBtn",on:{click:function(t){return e.goToGameDesign()}}},[n("font-awesome-icon",{staticClass:"fa-lg",attrs:{icon:"gamepad"}}),e._v(" 游戏设计\n    ")],1),n("button",{staticClass:"designBtn",on:{click:function(t){return e.goToStartUpAndEndDesign()}}},[n("font-awesome-icon",{staticClass:"fa-lg",attrs:{icon:"laptop"}}),e._v(" 界面设计\n    ")],1),n("button",{on:{click:function(t){return e.reset()}}},[e._v(e._s(e.gameEnd?"重置游戏":"结束游戏"))]),n("button",{on:{click:function(t){return e.save()}}},[e._v("保存")]),n("button",{on:{click:function(t){return e.restore()}}},[e._v("恢复")]),n("button",{on:{click:function(t){return e.downloadTheGame()}}},[e._v("下载")])]),n("div",{staticClass:"downLoadConfirm"})])},i=[],o=(n("3b2b"),n("5d73")),a=n.n(o),s=(n("5df3b"),n("a481"),n("795b")),l=n.n(s),c=(n("96cf"),n("3b8d")),u=(n("4917"),n("c5f6"),n("cebc")),p=n("f499"),f=n.n(p),h=(n("ac6a"),n("4948")),d=n("eb78"),m=n("2f62"),g='\n<!DOCTYPE html>\n<html>\n\n<head>\n   <meta charset="utf-8">\n   <title></title>\n\n</head>\n\n<style>\nhtml{\n   padding-top:100px\n}\n</style>\n\n<body>\n   <div id=\'game\'></div>\n</body>\n<script>\n\n\n\n   let GAME_LEVELS = gameLevelToBeReplaced\n   let gameSettings = gameSettingsToBeReplaced\n   let globalSettings = globalSettingsToBeReplaced\n\n   /* eslint-disable no-console */\n   ////放大倍数\n   var scale = 20;\n   var gameWidth = 700;\n   var gameHeight = 400;\n\n   ////每个actor的图片来源\n\n   let spritesSRC = spritesToBeReplaced\n   let playerSRC = playerToBeReplaced\n   let monsterSRC = monsterToBeReplaced\n   let drgonSRC = drgonToBeReplaced\n   let fireSRC = fileToBeReplaced\n   let dragonToFire = dragonToFireToBeReplaced\n\n   let otherSprites = srcToImage(spritesSRC)\n   let monsterSprites = srcToImage(monsterSRC)\n   let dragonSpritesSRC = srcToImage(drgonSRC);\n   let fireSpritesSRC = srcToImage(fireSRC);\n   let toFireSRC = srcToImage(dragonToFire)\n\n   function getImage(name, length) {\n      if (length == undefined) {\n         let image = new Image();\n         let src = \'../src/pic/pureGame/\' + name \n         if (src == undefined) throw new Error(\'no such image\')\n         image.src = src\n         return image\n      } else {\n         return Array.apply(null, { length: length }).map(function (_, index) {\n            let fileIndex = index + 1\n            let fileName = name.replace(/[.]/, fileIndex + ".")\n            return getImage(fileName)\n         })\n      }\n   }\n\n   function srcToImage(src){\n      if (typeof src == \'string\'){\n         let image = new Image();\n         image.src = src;\n         return image;\n      }else{\n         return Array.apply(null,{length:src.length}).map(function(_,index){\n            return srcToImage(src[index])\n         })\n      }\n   }\n\n\n\n   ////背景图片\n   //let gameBackgroundImg = document.createElement(\'img\');\n\n   //第一章：基础设置：level、state、actors。。。\n\n   var Level = class Level {\n      constructor(plan) {\n         //地图的基本信息\n         let rows = plan.trim().split("\\n").map(l => {\n            l = l.trim();\n            return [...l]\n         });\n         this.height = rows.length;\n         this.width = rows[0].length;\n         this.startActors = [];\n\n         this.rows = rows.map((row, y) => {\n            return row.map((ch, x) => {\n               let type = levelChars[ch];\n               if (typeof type == "string") return type;\n               this.startActors.push(\n                  type.create(new Vec(x, y), ch));\n               return "empty";\n            });\n         });\n      }\n      touches(pos, size, type) {\n         //某个位置（可以是任何actor的位置） 与 背景（墙、钱）的碰撞测试\n         var xStart = Math.floor(pos.x);\n         var xEnd = Math.ceil(pos.x + size.x);\n         var yStart = Math.floor(pos.y);\n         var yEnd = Math.ceil(pos.y + size.y);\n\n         for (var y = yStart; y < yEnd; y++) {\n            for (var x = xStart; x < xEnd; x++) {\n               let isOutside = x < 0 || x >= this.width ||\n                  y < 0 || y >= this.height;\n               let here = isOutside ? "wall" : this.rows[y][x];\n               if (typeof type == "string") {\n                  if (here == type) return true;\n               } else if (typeof type == \'object\') {\n                  //type必须是array，同时测试与多个type之间的碰撞\n                  if (type.some(a => here == a)) return true\n               }\n            }\n         }\n         return false;\n      }\n   }\n\n   var State = class State {\n      constructor(level, actors, status) {\n         this.level = level;\n         this.actors = actors;\n         this.status = status;\n      }\n\n      static start(level) {\n         return new State(level, level.startActors, "playing");\n      }\n\n      get player() {\n         if (this.actors.find(a => a.type == "player") == undefined) {\n            throw new Error(\'here\')\n         }\n         return this.actors.find(a => a.type == "player");\n      }\n      update(time, keys, gameClass) {\n         let actors = this.actors\n            .map(actor => actor.update(time, this, keys, gameClass));\n         let newState = new State(this.level, actors, this.status);\n         //先看this.status的状态\n         if (newState.status != "playing") return newState;\n         //再看player有没有撞lava\n         let player = newState.player;\n         if (this.level.touches(player.pos, player.size, "lava")) {\n            return new State(this.level, actors, "lost");\n         }\n         //再处理actors之间的碰撞以及增添或删除actors\n         for (let actor of actors) {\n            if (actor != player && overlap(player, actor)) {\n               newState = actor.collide(newState);\n            }\n            if (actor.type == "fire" && actor.isGone) {\n               newState = actor.gone(newState)\n            } else if (actor.type == "dragon" && actor.fire.isFire) {\n               newState = actor.firing(newState)\n            }\n         }\n         return newState;\n      }\n   }\n\n   var Vec = class Vec {\n      constructor(x, y) {\n         this.x = x; this.y = y;\n      }\n      plus(other) {\n         return new Vec(this.x + other.x, this.y + other.y);\n      }\n      times(factor) {\n         return new Vec(this.x * factor, this.y * factor);\n      }\n   }\n\n   var Player = class Player {\n      constructor(pos, speed, property) {\n         this.pos = pos;\n         this.speed = speed;\n         this.size = new Vec(0.8, 1.5).times(property==undefined?1:property.size)\n         this.playerXSpeed = property == undefined ? 7 : property.speed;\n         this.gravity = 30;\n         this.jumpSpeed = property == undefined ? 17 : property.jumpSpeed;\n      }\n      get type() {\n         return "player";\n      }\n      static create(pos) {\n         return new Player(pos.plus(new Vec(0, -2.1)), new Vec(0, 0));\n      }\n      update(time, state, keys, property) {\n         let xSpeed = 0;\n         if (keys.ArrowLeft) xSpeed -= this.playerXSpeed;\n         if (keys.ArrowRight) xSpeed += this.playerXSpeed;\n         let pos = this.pos;\n         let movedX = pos.plus(new Vec(xSpeed * time, 0));\n         if (!state.level.touches(movedX, this.size, "wall")) {\n            pos = movedX;\n         }\n         let ySpeed = this.speed.y + time * this.gravity;\n         let movedY = pos.plus(new Vec(0, ySpeed * time));\n         if (!state.level.touches(movedY, this.size, "wall")) {\n            pos = movedY;\n         } else if (keys.ArrowUp && ySpeed > 0) {\n            ySpeed = -this.jumpSpeed;\n         } else {\n            ySpeed = 0;\n         }\n         return new Player(pos, new Vec(xSpeed, ySpeed), property);\n      }\n   }\n\n   var Lava = class Lava {\n      constructor(pos, speed, reset) {\n         this.pos = pos;\n         this.speed = speed;\n         this.reset = reset;\n         this.size = new Vec(1, 1)\n      }\n\n      get type() { return "lava"; }\n\n      static create(pos, ch) {\n         if (ch == "=") {\n            return new Lava(pos, new Vec(2, 0));\n         } else if (ch == "|") {\n            return new Lava(pos, new Vec(0, 2));\n         } else if (ch == "v") {\n            return new Lava(pos, new Vec(0, 3), pos);\n         }\n      }\n      collide(state) {\n         return new State(state.level, state.actors, "lost");\n      }\n      update(time, state) {\n         let newPos = this.pos.plus(this.speed.times(time));\n         if (!state.level.touches(newPos, this.size, "wall")) {\n            return new Lava(newPos, this.speed, this.reset);\n         } else if (this.reset) {\n            return new Lava(this.reset, this.speed, this.reset);\n         } else {\n            return new Lava(this.pos, this.speed.times(-1));\n         }\n      }\n   }\n\n   var Coin = class Coin {\n      constructor(pos, basePos, wobble) {\n         this.pos = pos;\n         this.basePos = basePos;\n         this.wobble = wobble;\n         this.size = new Vec(0.6, 0.6);\n         this.wobbleSpeed = 8;\n         this.wobbleDist = 0.07;\n      }\n\n      get type() { return "coin"; }\n\n      static create(pos) {\n         let basePos = pos.plus(new Vec(0.2, 0.1));\n         return new Coin(basePos, basePos,\n            Math.random() * Math.PI * 2);\n      }\n      collide(state) {\n         let filtered = state.actors.filter(a => a != this);\n         let status = state.status;\n         if (!filtered.some(a => a.type == "coin")) status = "won";\n         return new State(state.level, filtered, status);\n      }\n      update(time) {\n         let wobble = this.wobble + time * this.wobbleSpeed;\n         let wobblePos = Math.sin(wobble) * this.wobbleDist;\n         return new Coin(this.basePos.plus(new Vec(0, wobblePos)),\n            this.basePos, wobble);\n      }\n   }\n\n   class Monster {\n      constructor(pos, speed) {\n         this.pos = pos;\n         this.speed = speed;\n         this.size = new Vec(1, 1)\n      }\n      get type() {\n         return \'monster\'\n      }\n      static create(pos) {\n         return new Monster(pos, new Vec(-2, 7))\n      }\n      collide(state) {\n         return new State(state.level, state.actors, \'lost\');\n      }\n      update(time, state) {\n         let xSpeed = this.speed.x;\n         let pos = this.pos;\n         let movedX = pos.plus(new Vec(xSpeed * time, 0))\n         if (!state.level.touches(movedX, this.size, ["wall", "lava"])) {\n            pos = movedX\n         } else {\n            xSpeed = -this.speed.x;\n         }\n         let ySpeed = this.speed.y;\n         let movedY = pos.plus(new Vec(0, ySpeed * time));\n         if (!state.level.touches(movedY, this.size, ["wall", "lava"])) {\n            pos = movedY\n         }\n         return new Monster(pos, new Vec(xSpeed, ySpeed))\n      }\n   }\n\n   class Dragon {\n      constructor(pos, speed, fire = { isFire: false, lastShot: 0 }) {\n         this.pos = pos;\n         this.speed = speed;\n         this.size = new Vec(1.5, 1.5)\n         this.fire = fire;\n      }\n      get type() {\n         return \'dragon\'\n      }\n      static create(pos) {\n         return new Dragon(pos, new Vec(0, 0))\n      }\n      collide(state) {\n         return new State(state.level, state.actors, \'lost\')\n      }\n      firing(state) {\n         let xSpeed = this.speed.x > 0 ? 5 : -5\n         let fire = new Fire(this.pos, new Vec(xSpeed, 0))\n         let actors = state.actors;\n         actors.push(fire)\n         return new State(state.level, actors, state.status)\n      }\n      update(time, state) {\n         let player = state.player\n         //会跟踪player，一定距离之内会喷火\n\n         let xDistance = player.pos.x - this.pos.x;\n         let xSpeed = xDistance > 0 ? 2 : -2\n         if (Math.abs(xDistance) < 0.1) {\n            xSpeed = 0;\n         }\n         let pos = this.pos;\n         let movedX = pos.plus(new Vec(xSpeed * time, 0))\n         if (!state.level.touches(movedX, this.size, ["wall", "lava"])) {\n            pos = movedX\n         }\n\n         let yDistance = player.pos.y - this.pos.y;\n         let ySpeed = yDistance > 0 ? 2.5 : -1.5\n         if (Math.abs(yDistance) < 0.1) ySpeed = 0;\n         let movedY = pos.plus(new Vec(0, ySpeed * time));\n         if (!state.level.touches(movedY, this.size, ["wall", "lava"])) {\n            pos = movedY\n         }\n         //考虑要不要喷火,设定3秒冷却时间\n         let fire = this.fire;\n         if (Math.abs(xDistance) < 10 && Math.abs(yDistance) < 10 &&\n            Date.now() - fire.lastShot > 3000) {\n            fire.isFire = true;\n            fire.lastShot = Date.now()\n         } else {\n            this.fire.isFire = false;\n         }\n\n         return new Dragon(pos, new Vec(xSpeed, ySpeed), fire)\n      }\n   }\n\n   class Fire {\n      constructor(pos, speed, gone = false) {\n         this.pos = pos;\n         this.speed = speed;\n         this.size = new Vec(0.8, 1.4)\n         this.gravity = 10;\n         this.isGone = gone;\n      }\n      get type() {\n         return \'fire\'\n      }\n      static create(pos) {\n         return new Fire(pos, new Vec(0, 0))\n      }\n      collide(state) {\n         return new State(state.level, state.actors, \'lost\')\n      }\n      gone(state) {\n         let filtered = state.actors.filter(a => a != this);\n         return new State(state.level, filtered, state.status)\n      }\n      update(time, state) {\n         let pos = this.pos;\n         let xSpeed = this.speed.x\n         let gone = this.isGone;\n         let movedX = pos.plus(new Vec(xSpeed * time, 0))\n         if (!state.level.touches(movedX, this.size, ["wall", "lava"])) {\n            pos = movedX\n         } else {\n            gone = true;\n         }\n         let ySpeed = this.speed.y + this.gravity * time;\n         let movedY = pos.plus(new Vec(0, ySpeed * time));\n         if (!state.level.touches(movedY, this.size, ["wall", "lava"])) {\n            pos = movedY\n         } else {\n            gone = true;\n         }\n         return new Fire(pos, new Vec(xSpeed, ySpeed), gone)\n      }\n   }\n\n   var levelChars = {\n      ".": "empty", "#": "wall", "+": "lava",\n      "@": Player, "o": Coin,\n      "=": Lava, "|": Lava, "v": Lava, \'m\': Monster,\n      "d": Dragon, "f": Fire\n   };\n\n   //第二章：actors之间的碰撞与更新、state的更新\n\n   function overlap(moveActor, hitActor) {\n      //测试上下左右的碰撞位置\n      let actor1Left = moveActor.pos.x\n      let actor1Right = moveActor.size.x + moveActor.pos.x;\n      let actor1Top = moveActor.pos.y;\n      let actor1Bottom = moveActor.pos.y + moveActor.size.y;\n      let actor2Left = hitActor.pos.x\n      let actor2Right = hitActor.size.x + hitActor.pos.x;\n      let actor2Top = hitActor.pos.y;\n      let actor2Bottom = hitActor.pos.y + hitActor.size.y;\n      let hitPosition = {\n         top: false,\n         left: false,\n         right: false,\n         bottom: false\n      };\n      let hit = false;\n      if (actor1Right - actor2Left < hitActor.size.x &&\n         actor1Right - actor2Left > 0 &&\n         actor2Right - actor1Left > hitActor.size.x &&\n         actor1Top < actor2Bottom && actor1Bottom > actor2Top) {\n         hitPosition.left = true;\n         hit = true\n      }\n      if (actor2Right - actor1Left < hitActor.size.x &&\n         actor2Right - actor1Left > 0 &&\n         actor1Right - actor2Left > hitActor.size.x &&\n         actor1Top < actor2Bottom && actor1Bottom > actor2Top) {\n         hitPosition.right = true;\n         hit = true;\n      }\n      if (actor1Bottom - actor2Top < hitActor.size.y &&\n         actor1Bottom - actor2Top > 0 &&\n         actor2Bottom - actor1Top > hitActor.size.y &&\n         actor1Left < actor2Right && actor1Right > actor2Left) {\n         hitPosition.top = true;\n         hit = true;\n      }\n      if (actor2Bottom - actor1Top < hitActor.size.y &&\n         actor2Bottom - actor1Top > 0 &&\n         actor1Bottom - actor2Top > hitActor.size.y &&\n         actor1Left < actor2Right && actor1Right > actor2Left) {\n         hitPosition.bottom = true;\n         hit = true;\n      }\n      return hit ? hitPosition : hit\n\n   }\n   //第三章：canvas\n\n   function flipHorizontally(context, around) {\n      context.translate(around, 0);\n      context.scale(-1, 1);\n      context.translate(-around, 0);\n   }\n\n   ////渲染模式\n   class CanvasDisplay {\n      constructor(level, gameClass) {\n         this.canvas = document.createElement("canvas");\n         this.canvas.style.display = \'block\';\n         this.canvas.style.margin = \'auto\'\n         this.canvas.width = Math.min(gameWidth, level.width * scale);\n         this.canvas.height = Math.min(gameHeight, level.height * scale);\n         gameClass.dom.appendChild(this.canvas);\n         this.cx = this.canvas.getContext("2d");\n         this.flipPlayer = false;\n         this.flipDragon = false;\n         this.flipMonster = false;\n         this.flipFire = false;\n         this.viewport = {\n            left: 0,\n            top: 0,\n            //屏幕的3分之一\n            width: this.canvas.width / scale,\n            height: this.canvas.height / scale\n         };\n         this.gameClass = gameClass;\n      }\n      clear() {\n         this.canvas.remove();\n      }\n      updateViewport(state) {\n         let view = this.viewport, margin_width = view.width / 3, margin_height = view.height / 3;\n         let player = state.player;\n         let center = player.pos.plus(player.size.times(0.5));\n\n         if (center.x < view.left + margin_width) {\n            view.left = Math.max(center.x - margin_width, 0);\n         } else if (center.x > view.left + view.width - margin_width) {\n            view.left = Math.min(center.x + margin_width - view.width,\n               state.level.width - view.width);\n         }\n         if (center.y < view.top + margin_height) {\n            view.top = Math.max(center.y - margin_height, 0);\n         } else if (center.y > view.top + view.height - margin_height) {\n            view.top = Math.min(center.y + margin_height - view.height,\n               state.level.height - view.height);\n         }\n      }\n      clearDisplay(status) {\n         //通过game对应的level找到调出渲染的参数\n         let backgroundImage = this.gameClass.backgroundImage;\n         if (backgroundImage !== null) {\n            //处理游戏背景\n            this.cx.drawImage(backgroundImage, 0, 0, this.canvas.width, this.canvas.height)\n         } else {\n            //default background setting\n            if (status == "won") {\n               this.cx.fillStyle = "rgb(68, 191, 255)";\n            } else if (status == "lost") {\n               this.cx.fillStyle = "rgb(44, 136, 214)";\n            } else {\n               this.cx.fillStyle = this.gameClass.backgroundColor || "rgb(52, 166, 251)";\n            }\n            this.cx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n         }\n      }\n      drawBackground(level) {\n         let { left, top, width, height } = this.viewport;\n         let xStart = Math.floor(left);\n         let xEnd = Math.ceil(left + width);\n         let yStart = Math.floor(top);\n         let yEnd = Math.ceil(top + height);\n\n         for (let y = yStart; y < yEnd; y++) {\n            for (let x = xStart; x < xEnd; x++) {\n               let tile = level.rows[y][x];\n               if (tile == "empty") continue;\n               let screenX = (x - left) * scale;\n               let screenY = (y - top) * scale;\n               let tileX = tile == "lava" ? 2 * scale : 0;\n               this.cx.drawImage(otherSprites, tileX, 0, 2 * scale, 2 * scale,\n                  screenX, screenY, scale, scale);\n            }\n         }\n      }\n      drawPlayer(player, x, y, width, height) {\n         const playerXOverlap = 4;\n         width += playerXOverlap * 2;\n         x -= playerXOverlap;\n\n         if (player.speed.x != 0) {\n            this.flipPlayer = player.speed.x < 0;\n         }\n\n         let tile = 8;\n         if (player.speed.y != 0) {\n            tile = 9;\n         } else if (player.speed.x != 0) {\n            tile = Math.floor(Date.now() / 60) % 8;\n         }\n\n         this.cx.save();\n         if (this.flipPlayer) {\n            flipHorizontally(this.cx, x + width / 2);\n         }\n         let tileX = tile *  48;\n         this.cx.drawImage(this.gameClass.playerSprites, tileX, 0, 48, 60, x, y, width, height);\n         this.cx.restore();\n      }\n      drawMonster(monster, x, y, width, height) {\n         if (monster.speed.x != 0) {\n            this.flipMonster = monster.speed.x > 0;\n         }\n         this.cx.save();\n         if (this.flipMonster) {\n            flipHorizontally(this.cx, x + width / 2);\n         }\n         this.cx.drawImage(monsterSprites, x, y, width, height)\n         this.cx.restore()\n      }\n      drawDragon(dragon, x, y, width, height) {\n         if (dragon.speed.x != 0) {\n            this.flipDragon = dragon.speed.x > 0;\n         }\n         this.cx.save();\n         if (this.flipDragon) {\n            flipHorizontally(this.cx, x + width / 2);\n         }\n         let tile;\n         let afterFire = Date.now() - dragon.fire.lastShot;\n         if (afterFire < 240) {\n            //显示喷火图案\n            if (afterFire < 60) tile = 0;\n            else if (afterFire < 120) tile = 1;\n            else if (afterFire < 180) tile = 2;\n            else tile = 3\n            this.cx.drawImage(toFireSRC[tile], x, y, width, height)\n         } else {\n            //飞行图案\n            tile = Math.floor(Date.now() / 60) % 10;\n            this.cx.drawImage(dragonSpritesSRC[tile], x, y, width, height)\n         }\n         this.cx.restore()\n\n      }\n      drawFire(fire, x, y, width, height) {\n         if (fire.speed.x != 0) {\n            this.flipFire = fire.speed.x < 0;\n         }\n         let tile;\n         if (fire.speed.y < 2) {\n            tile = 0\n         } else if (fire.speed.y < 6) {\n            tile = 1\n         } else if (fire.speed.y < 10) {\n            tile = 2\n         } else {\n            tile = 3;\n         }\n         this.cx.save();\n         if (this.flipFire) {\n            flipHorizontally(this.cx, x + width / 2);\n         }\n         this.cx.drawImage(fireSpritesSRC[tile], x, y, width, height)\n         this.cx.restore()\n      }\n      drawActors(actors,status) {\n         for (let actor of actors) {\n            let width = actor.size.x * scale;\n            let height = actor.size.y * scale;\n            let x = (actor.pos.x - this.viewport.left) * scale;\n            let y = (actor.pos.y - this.viewport.top) * scale;\n            if (actor.type == "player") {\n               if (status !== \'lost\'){\n               this.drawPlayer(actor, x, y, width, height);\n            }else{\n               this.cx.font =`${actor.size.y * 30 }px Arial`\n               this.cx.fillText("💥",x,y+actor.size.y*20)\n               this.cx.restore()\n            }\n            } else if (actor.type == "monster") {\n               this.drawMonster(actor, x, y, width, height)\n            } else if (actor.type == "dragon") {\n               this.drawDragon(actor, x, y, width, height)\n            } else if (actor.type == "fire") {\n               this.drawFire(actor, x, y, width, height)\n            } else {\n               let tileX = (actor.type == "coin" ? 2 : 1) * 2 * scale;\n               this.cx.drawImage(otherSprites, tileX, 0, 2 * width, 2 * height, x, y, width, height);\n            }\n         }\n      }\n      drawProperty(actors) {\n         let numberOfCoin = actors.reduce((total, each) => {\n            each = each.type == \'coin\' ? 1 : 0;\n            return total + each\n         }, 0);\n         this.cx.font = \'15px Arial\';\n         this.cx.fillStyle = \'red\';\n         this.cx.fillText(`👦: ${ this.gameClass.lives } `, 10, 30);\n         this.cx.fillText(`💰: ${ numberOfCoin } `, 10, 55)\n         if (this.gameClass.totalLevel != 1) {\n            this.cx.fillText(`L: ${ this.gameClass.level + 1 } /${this.gameClass.totalLevel}`, 15, 80)\n         }\n      }\nsyncState(state) {\n  this.updateViewport(state);\n  this.clearDisplay(state.status);\n  this.drawBackground(state.level);\n  this.drawActors(state.actors,state.status);\n  this.drawProperty(state.actors)\n}\n   }\n\n//最后一章：游戏的运行\n\nfunction runAnimation(frameFunc) {\n  let lastTime = null;\n  function frame(time) {\n    if (lastTime != null) {\n      let timeStep = Math.min(time - lastTime, 100) / 1000;\n      if (frameFunc(timeStep) === false) return;\n    }\n    lastTime = time;\n    requestAnimationFrame(frame);\n  }\n  requestAnimationFrame(frame);\n}\n\n\nfunction runLevel(level, gameClass) {\n  let display = new CanvasDisplay(level, gameClass);\n  let state = State.start(level);\n  let ending = 1;\n  let running = "yes";\n\n  return new Promise(resolve => {\n    function escHandler(event) {\n      if (event.key != "Escape") return;\n      event.preventDefault();\n      if (running == "no") {\n        running = "yes";\n        //true的时候，再call一次runAnimation\n        runAnimation(frame);\n      } else {\n        running = "no";\n      }\n    }\n    window.addEventListener("keydown", escHandler);\n    let arrowKeys = trackKeys(["ArrowLeft", "ArrowRight", "ArrowUp"]);\n    function frame(time) {\n      if (running == "no") {\n        return false;\n      }\n      state = state.update(time, arrowKeys, gameClass);\n      display.syncState(state);\n      if (state.status == "playing") {\n        return true;\n      } else if (ending > 0) {\n        ending -= time;\n        return true;\n      } else {\n        display.clear();\n        window.removeEventListener("keydown", escHandler);\n        arrowKeys.unregister();\n        resolve(state.status);\n        return false;\n      }\n    }\n    runAnimation(frame);\n  });\n}\n\nfunction trackKeys(keys) {\n  let down = Object.create(null);\n  function track(event) {\n    if (keys.includes(event.key)) {\n      down[event.key] = event.type == "keydown";\n      event.preventDefault();\n    }\n  }\n  window.addEventListener("keydown", track);\n  window.addEventListener("keyup", track);\n  down.unregister = () => {\n    window.removeEventListener("keydown", track);\n    window.removeEventListener("keyup", track);\n  };\n  return down;\n}\n\n\nclass Game {\n  constructor(dom) {\n    this.dom = dom;\n    this.playerSprites = srcToImage(playerSRC);\n    this.backgroundColor = "rgb(52, 166, 251)";\n    this.backgroundImage = null;\n    this.lives = 3;\n    this.speed = 7;\n    this.size = 1;\n    this.jumpSpeed = 17;\n  }\n   async runGame(plans, levelSettings = [], globalSettings) {\n      return new Promise(async (resolve) => {\n         //更改全球设置\n         if (globalSettings != undefined) {\n            this.mutate(globalSettings)\n         }\n         let startLives = this.lives\n         this.totalLevel = plans.length;\n         for (let level = 0; level < plans.length;) {\n            //重置属性\n            this.backgroundImage = null;\n            this.level = level;\n            //修改级别属性\n            if (levelSettings.length > 0) {\n               this.mutate(levelSettings[level])\n            }\n            let status = await runLevel(new Level(plans[level]), this);\n            if (status == \'won\') {\n               level++\n            } else {\n               this.lives--;\n            }\n            if (this.lives == 0) {\n               level = 0;\n               this.lives = startLives;\n            }\n         }\n         resolve(\'won\')\n      })\n      }\n      mutate(valueToBeMutated) {\n         let keys = Object.keys(valueToBeMutated);\n         keys.forEach(key => {\n            if (this[key] === undefined) throw new Error(\'no such property: \' + key)\n      \n            if (valueToBeMutated[key] != undefined) {\n               //这里要转化为image\n               if (key == \'backgroundImage\' || key ==\'playerSprites\'){\n                  let image = new Image();\n                  image.src = valueToBeMutated[key];\n                  this[key] = image;\n                  return;\n               }\n               this[key] = valueToBeMutated[key]\n            }\n         })\n      }\n\n\n}\n\n  function elt(type, props,style,...children) {\n    let dom = document.createElement(type);\n    if (props) Object.assign(dom, props);\n    if (style) {\n      for (let key in style){\n        dom.style[key] = style[key]\n      }\n    }\n    for (let child of children) {\n      if (typeof child != "string") dom.appendChild(child);\n      else dom.appendChild(document.createTextNode(child));\n    }\n    return dom;\n  }\n\n\n  let startUpFacebackgroundStyle = startUpFacebackgroundStyleToBeReplaced\n  let startBtnStyleFromVuex = startBtnStyleToBeReplace\n  let startUpBtnText = startUpBtnTextToBeReplace\n  let textComponents = textComponentsToBeReplace\n  let pictureComponents = pictureComponentsToBeReplace\n\n\n  let endFacebackgroundStyle = endFacebackgroundStyleToBeReplaced\n  let textFlowStyleFromVuex = textFlowStyleFromVuexToBeReplaced\n  let textFlowAnimationFromVuex = textFlowAnimationFromVuexToBeReplaced\n  let textFlowContent = textFlowContentToBeReplaced\n  let endTextComponents = endTextComponentsToBeReplace\n  let endPictureComponents = endPictureComponentsToBeReplace\n \n  //开头界面部分\n  let startUpFaceStyle = Object.assign({},startUpFacebackgroundStyle,{\n    margin: "auto",\n    position: "relative",\n    width: "700px",\n    height: "400px",\n    overflow: "hidden",\n    backgroundPosition: "center",\n  })\n\n  let startBtnStyle = Object.assign({},startBtnStyleFromVuex,{position: "absolute"})\n\n  let startBtnProps = {\n    type:\'button\',\n    onclick: async ()=>{\n      document.querySelector(\'.startUpFaceContainer\').remove()\n      await new Game(document.querySelector(\'#game\')).runGame(GAME_LEVELS,gameSettings,globalSettings);\n      document.body.appendChild(endFaceContainer)\n      return endFaceAnimation()\n    }\n  }\n\n  let pictureDom = pictureComponents.map(component=>{\n    return elt(\'div\',null,component.style,elt(\'img\',{src:component.url,width:component.width}))\n   })\n  let textDom = textComponents.map(component=>{\n    return elt(\'div\',null,component.style,component.textContent);\n  }) \n  let startBtn = elt(\'button\', startBtnProps,startBtnStyle,startUpBtnText)\n  let startUpFaceContainer = elt(\'div\', {className:\'startUpFaceContainer\'},startUpFaceStyle, startBtn,...textDom,...pictureDom)\n  document.body.appendChild(startUpFaceContainer)\n\n   //结尾界面部分\n  let endFaceStyle = Object.assign({},endFacebackgroundStyle,{\n    margin: "auto",\n    position: "relative",\n    width: "700px",\n    height: "400px",\n    overflow: "hidden",\n    backgroundPosition: "center",\n  })\n  let endPictureDom = endPictureComponents.map(component=>{\n    return elt(\'div\',null,component.style,elt(\'img\',{src:component.url,width:component.width}))\n   })\n  let endTextDom = endTextComponents.map(component=>{\n    return elt(\'div\',null,component.style,component.textContent);\n  }) \n\n  let textFlowDom = elt(\'pre\',null,textFlowStyleFromVuex,textFlowContent);\n  let endFaceContainer = elt(\'div\',{className:\'endFaceContainer\'},endFaceStyle,textFlowDom,...endTextDom,...endPictureDom)\n\n  function pixelTypeTransfer(value) {\n      if (typeof value == "string") {\n        return Number(value.match(/-?\\d+/)[0]);\n      } else {\n        return value + "px";\n      }\n   }\n\n  function endFaceAnimation(){\n     let {\n        animation,\n        animationTime,\n        animationDistance,\n        animationDir\n      } = textFlowAnimationFromVuex\n      if (animation == false || animationTime == 0 || animationDistance == 0)\n        return;\n      let time = animationTime * 1000;\n      let start = 0;\n      if (animationDir == "top" || animationDir == "bottom") {\n        let distance =\n          animationDir == "top" ? -1 * animationDistance : animationDistance;\n        let animate = setInterval(() => {\n          textFlowDom.style.top =\n            pixelTypeTransfer(textFlowDom.style.top) +\n            (distance / time) * 60 +\n            "px";\n          start += 60;\n          if (start > time) clearInterval(animate);\n        }, 60);\n      } else {\n        let distance =\n          animationDir == "left" ? -1 * animationDistance : animationDistance;\n        let animate = setInterval(() => {\n          textFlowDom.style.left =\n            pixelTypeTransfer(textFlowDom.style.left) +\n            (distance / time) * 60 +\n            "px";\n          start += 60;\n          if (start > time) clearInterval(animate);\n        }, 60);\n      }\n  }\n\n<\/script >\n\n\n</html >\n',y=(n("f654"),n("ec45")),v={};function w(e){e.keys().forEach(function(t){return v[t]=e(t)})}w(n("3c10"));var x={name:"entrieGame",mixins:[y["a"]],beforeRouteLeave:function(e,t,n){null!=this.runningGame?(this.runningGame.stopGame(),n()):n()},beforeRouteEnter:function(e,t,n){function r(){var e=navigator.userAgent,t=e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1;return t}r()?(alert("抱歉，目前不支持该浏览器，可以使用Chrome,Edge,Opera,Firefox,Safari等浏览器"),n(!1)):n()},mounted:function(){this.textFlowRealTimeStyle=JSON.parse(f()(this.endProcessTextFlow.style))},data:function(){return{runningGame:null,gameEnd:!1,textFlowRealTimeStyle:null}},watch:{gameEnd:function(){var e=this;if(0!=this.gameEnd){this.textFlowRealTimeStyle.top=this.endProcessTextFlow.style.top,this.textFlowRealTimeStyle.left=this.endProcessTextFlow.style.left;var t=this.endProcessTextFlow.animate,n=t.animation,r=t.animationTime,i=t.animationDistance,o=t.animationDir;if(0!=n&&0!=r&&0!=i){var a=1e3*r,s=0;if("top"==o||"bottom"==o)var l="top"==o?-1*i:i,c=setInterval(function(){e.textFlowRealTimeStyle.top=e.pixelTypeTransfer(e.textFlowRealTimeStyle.top)+l/a*60+"px",s+=60,s>a&&clearInterval(c)},60);else var u="left"==o?-1*i:i,p=setInterval(function(){e.textFlowRealTimeStyle.left=e.pixelTypeTransfer(e.textFlowRealTimeStyle.left)+u/a*60+"px",s+=60,s>a&&clearInterval(p)},60)}}}},computed:Object(u["a"])({},Object(m["d"])("playerFigure",{playerFigureImgData:"imgData",playerFigureWidth:null}),Object(m["d"])("gameLevel",["levelMap","levelSetting","currentLevel","structureDesign","globalPlayerSetting"]),Object(m["d"])("startUpFace",["startUpBtn","backgroundStyle","startUpBtnText"]),Object(m["b"])("startUpFace",["processTextComponent","processPictureComponent"]),Object(m["d"])("endFace",{endBackgroundStyle:"backgroundStyle"}),Object(m["b"])("endFace",{endProcessTextComponent:"processTextComponent",endProcessPictureComponent:"processPictureComponent",endProcessTextFlow:"processTextFlow"}),{gameContainer:function(){return document.querySelector(".gameContainer")},playerFigure:function(){var e=this.$store.state.playerFigure.result;if(null==e)return null;var t=new Image;return t.src=this.$store.state.playerFigure.result,t}}),methods:{save:function(){function e(e,t){localStorage.setItem(e,f()(t))}e("gameLevel",this.$store.state.gameLevel),e("startUpFace",this.$store.state.startUpFace),e("endFace",this.$store.state.endFace),alert("已保存！")},restore:function(){function e(e,t){var n=localStorage.getItem(e);null!=n&&t.$store.commit(e+"/restoreData",JSON.parse(n))}e("gameLevel",this),e("startUpFace",this),e("endFace",this),alert("已恢复！")},reset:function(){if(1==this.gameEnd)return this.gameEnd=!1,void(this.runningGame=null);null!=this.runningGame&&this.runningGame.stopGame()},pixelTypeTransfer:function(e){return"string"==typeof e?Number(e.match(/-?\d+/)[0]):e+"px"},startGame:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=0==this.levelMap.length?d["a"]:this.levelMap,this.runningGame=new h["a"](this.gameContainer),e.next=4,this.runningGame.runGame(t,this.levelSetting,this.globalPlayerSetting);case 4:this.gameEnd=!0;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),goToPlayerFigureDesign:function(){this.$router.push("/playerFigure/combine")},goToGameDesign:function(){this.$router.push("/gameDesign")},goToStartUpAndEndDesign:function(){this.$router.push("/startUpAndEndDesign")},downloadTheGame:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=function(e,t){return new l.a(function(){var n=Object(c["a"])(regeneratorRuntime.mark(function n(r){var i,o,s,c,u,p,h,m,g;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return g=function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=a()(t);!(n=(o=s.next()).done);n=!0){var l=o.value;e=e.replace(new RegExp(l.spot),f()(l.value))}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e},m=function(e,t,n){if(void 0==n){var r=t["./"+e];if(void 0==r)throw new Error("no such image");var i=new Image;return i.src=r,new l.a(function(e){i.onload=function(){var t=document.createElement("canvas");t.width=i.width,t.height=i.height;var n=t.getContext("2d");document.body.appendChild(t),n.drawImage(i,0,0);var r=t.toDataURL();t.remove(),i.remove(),e(r)}})}return new l.a(function(r){var i=Array.apply(null,{length:n}).map(function(n,r){var i=r+1,o=e.replace(/[.]/,i+".");return m(o,t)});l.a.all(i).then(function(e){return r(e)})})},n.next=4,m("sprites.png",v);case 4:return i=n.sent,n.next=7,m("player.png",v);case 7:return o=n.sent,n.next=10,m("Monster1.png",v);case 10:return s=n.sent,n.next=13,m("dragon.png",v,10);case 13:return c=n.sent,n.next=16,m("fire.png",v,4);case 16:return u=n.sent,n.next=19,m("tofire.png",v,8);case 19:p=n.sent,h=g(e,[{spot:"endFacebackgroundStyleToBeReplaced",value:t.endBackgroundStyle},{spot:"textFlowStyleFromVuexToBeReplaced",value:t.endProcessTextFlow.style},{spot:"textFlowAnimationFromVuexToBeReplaced",value:t.endProcessTextFlow.animate},{spot:"textFlowContentToBeReplaced",value:t.endProcessTextFlow.textContent},{spot:"endTextComponentsToBeReplace",value:t.endProcessTextComponent},{spot:"endPictureComponentsToBeReplace",value:t.endProcessPictureComponent},{spot:"pictureComponentsToBeReplace",value:t.processPictureComponent},{spot:"textComponentsToBeReplace",value:t.processTextComponent},{spot:"startUpFacebackgroundStyleToBeReplaced",value:t.backgroundStyle},{spot:"startBtnStyleToBeReplace",value:t.startUpBtn},{spot:"startUpBtnTextToBeReplace",value:t.startUpBtnText},{spot:"gameLevelToBeReplaced",value:0==t.levelMap.length?d["a"]:t.levelMap},{spot:"gameSettingsToBeReplaced",value:t.levelSetting},{spot:"globalSettingsToBeReplaced",value:t.globalPlayerSetting},{spot:"spritesToBeReplaced",value:i},{spot:"playerToBeReplaced",value:o},{spot:"monsterToBeReplaced",value:s},{spot:"drgonToBeReplaced",value:c},{spot:"fileToBeReplaced",value:u},{spot:"dragonToFireToBeReplaced",value:p}]),r([h]);case 22:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())},t=window.prompt("输入游戏名称","diyGame"),null!=t){e.next=4;break}return e.abrupt("return");case 4:return e.t0=Blob,e.next=7,o(g,this);case 7:e.t1=e.sent,e.t2={text:"text/plain"},n=new e.t0(e.t1,e.t2),r=window.URL.createObjectURL(n),i=document.createElement("a"),document.body.appendChild(i),i.setAttribute("href",r),i.setAttribute("download",t+".html"),i.click(),i.remove();case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},b=x,S=(n("95fa"),n("2877")),T=Object(S["a"])(b,r,i,!1,null,"0fede91c",null);t["default"]=T.exports},"268f":function(e,t,n){e.exports=n("fde4")},3022:function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!S(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),l=r[n];n<o;l=r[++n])w(l)||!k(l)?a+=" "+l:a+=" "+s(l);return a},t.deprecate=function(n,r){if("undefined"!==typeof e&&!0===e.noDeprecation)return n;if("undefined"===typeof e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;function o(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}return o};var o,a={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),F(r.showHidden)&&(r.showHidden=!1),F(r.depth)&&(r.depth=2),F(r.colors)&&(r.colors=!1),F(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),p(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function p(e,n,r){if(e.customInspect&&n&&B(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return S(i)||(i=p(e,i,r)),i}var o=f(e,n);if(o)return o;var a=Object.keys(n),s=u(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),R(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(B(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(C(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(R(n))return h(n)}var c,v="",w=!1,x=["{","}"];if(y(n)&&(w=!0,x=["[","]"]),B(n)){var b=n.name?": "+n.name:"";v=" [Function"+b+"]"}return C(n)&&(v=" "+RegExp.prototype.toString.call(n)),E(n)&&(v=" "+Date.prototype.toUTCString.call(n)),R(n)&&(v=" "+h(n)),0!==a.length||w&&0!=n.length?r<0?C(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=w?d(e,n,r,s,a):a.map(function(t){return m(e,n,r,s,t,w)}),e.seen.pop(),g(c,v,x)):x[0]+v+x[1]}function f(e,t){if(F(t))return e.stylize("undefined","undefined");if(S(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):w(t)?e.stylize("null","null"):void 0}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)z(t,String(a))?o.push(m(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(m(e,t,n,r,i,!0))}),o}function m(e,t,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),z(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=w(n)?p(e,l.value,null):p(e,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),F(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function g(e,t,n){var r=e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function y(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function w(e){return null===e}function x(e){return null==e}function b(e){return"number"===typeof e}function S(e){return"string"===typeof e}function T(e){return"symbol"===typeof e}function F(e){return void 0===e}function C(e){return k(e)&&"[object RegExp]"===D(e)}function k(e){return"object"===typeof e&&null!==e}function E(e){return k(e)&&"[object Date]"===D(e)}function R(e){return k(e)&&("[object Error]"===D(e)||e instanceof Error)}function B(e){return"function"===typeof e}function P(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function D(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(F(o)&&(o=Object({NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=y,t.isBoolean=v,t.isNull=w,t.isNullOrUndefined=x,t.isNumber=b,t.isString=S,t.isSymbol=T,t.isUndefined=F,t.isRegExp=C,t.isObject=k,t.isDate=E,t.isError=R,t.isFunction=B,t.isPrimitive=P,t.isBuffer=n("d60a");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",j(),t.format.apply(t,arguments))},t.inherits=n("3fb5"),t._extend=function(e,t){if(!t||!k(t))return e;var n=Object.keys(t),r=n.length;while(r--)e[n[r]]=t[n[r]];return e};var I="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function L(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function _(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(a,null,t)},function(t){e.nextTick(L,t,a)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t=e[I];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(a){n(a)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=I,t.callbackify=_}).call(this,n("4362"))},"3b2b":function(e,t,n){var r=n("7726"),i=n("5dbc"),o=n("86cc").f,a=n("9093").f,s=n("aae3"),l=n("0bfb"),c=r.RegExp,u=c,p=c.prototype,f=/a/g,h=/a/g,d=new c(f)!==f;if(n("9e1e")&&(!d||n("79e5")(function(){return h[n("2b4c")("match")]=!1,c(f)!=f||c(h)==h||"/a/i"!=c(f,"i")}))){c=function(e,t){var n=this instanceof c,r=s(e),o=void 0===t;return!n&&r&&e.constructor===c&&o?e:i(d?new u(r&&!o?e.source:e,t):u((r=e instanceof c)?e.source:e,r&&o?l.call(e):t),n?this:p,c)};for(var m=function(e){e in c||o(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},g=a(u),y=0;g.length>y;)m(g[y++]);p.constructor=c,c.prototype=p,n("2aba")(r,"RegExp",c)}n("7a56")("RegExp")},"3fb5":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},4362:function(e,t,n){t.nextTick=function(e){setTimeout(e,0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"5df3b":function(e,t,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},"95fa":function(e,t,n){"use strict";var r=n("ae0d"),i=n.n(r);i.a},a21f:function(e,t,n){var r=n("584a"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},ae0d:function(e,t,n){},bf90:function(e,t,n){var r=n("36c3"),i=n("bf0b").f;n("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},cebc:function(e,t,n){"use strict";var r=n("268f"),i=n.n(r),o=n("e265"),a=n.n(o),s=n("a4bb"),l=n.n(s),c=n("85f2"),u=n.n(c);function p(e,t,n){return t in e?u()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=l()(n);"function"===typeof a.a&&(r=r.concat(a()(n).filter(function(e){return i()(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}n.d(t,"a",function(){return f})},d60a:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};function o(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(o(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),i="/"===a(e,-1);return e=n(o(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&i&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var c=[];for(l=s;l<i.length;l++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e265:function(e,t,n){e.exports=n("ed33")},ec45:function(e,t,n){"use strict";t["a"]={created:function(){this.is_touch_device()&&(alert("游戏设计需在电脑端完成，以获得最佳体验"),this.$router.push("/"))},methods:{is_touch_device:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}}}},ed33:function(e,t,n){n("014b"),e.exports=n("584a").Object.getOwnPropertySymbols},f499:function(e,t,n){e.exports=n("a21f")},f654:function(e,t,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=n("3022"),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l=function(){return"foo"===function(){}.name}();function c(e){return Object.prototype.toString.call(e)}function u(e){return!i(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var p=e.exports=v,f=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(o.isFunction(e)){if(l)return e.name;var t=e.toString(),n=t.match(f);return n&&n[1]}}function d(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(l||!o.isFunction(e))return o.inspect(e);var t=h(e),n=t?": "+t:"";return"[Function"+n+"]"}function g(e){return d(m(e.actual),128)+" "+e.operator+" "+d(m(e.expected),128)}function y(e,t,n,r,i){throw new p.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function v(e,t){e||y(e,!0,t,"==",p.ok)}function w(e,t,n,a){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(u(e)&&u(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;a=a||{actual:[],expected:[]};var s=a.actual.indexOf(e);return-1!==s&&s===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),b(e,t,n,a))}return n?e===t:e==t}function x(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function b(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=x(e),a=x(t);if(i&&!a||!i&&a)return!1;if(i)return e=s.call(e),t=s.call(t),w(e,t,n);var l,c,u=k(e),p=k(t);if(u.length!==p.length)return!1;for(u.sort(),p.sort(),c=u.length-1;c>=0;c--)if(u[c]!==p[c])return!1;for(c=u.length-1;c>=0;c--)if(l=u[c],!w(e[l],t[l],n,r))return!1;return!0}function S(e,t,n){w(e,t,!0)&&y(e,t,n,"notDeepStrictEqual",S)}function T(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function F(e){var t;try{e()}catch(n){t=n}return t}function C(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=F(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&y(i,n,"Missing expected exception"+r);var a="string"===typeof r,s=!e&&o.isError(i),l=!e&&i&&!n;if((s&&a&&T(i,n)||l)&&y(i,n,"Got unwanted exception"+r),e&&i&&n&&!T(i,n)||!e&&i)throw i}p.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=g(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=h(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},o.inherits(p.AssertionError,Error),p.fail=y,p.ok=v,p.equal=function(e,t,n){e!=t&&y(e,t,n,"==",p.equal)},p.notEqual=function(e,t,n){e==t&&y(e,t,n,"!=",p.notEqual)},p.deepEqual=function(e,t,n){w(e,t,!1)||y(e,t,n,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(e,t,n){w(e,t,!0)||y(e,t,n,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(e,t,n){w(e,t,!1)&&y(e,t,n,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=S,p.strictEqual=function(e,t,n){e!==t&&y(e,t,n,"===",p.strictEqual)},p.notStrictEqual=function(e,t,n){e===t&&y(e,t,n,"!==",p.notStrictEqual)},p.throws=function(e,t,n){C(!0,e,t,n)},p.doesNotThrow=function(e,t,n){C(!1,e,t,n)},p.ifError=function(e){if(e)throw e};var k=Object.keys||function(e){var t=[];for(var n in e)a.call(e,n)&&t.push(n);return t}}).call(this,n("c8ba"))},fde4:function(e,t,n){n("bf90");var r=n("584a").Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}}}]);
//# sourceMappingURL=entireGame.70d3dce5.js.map